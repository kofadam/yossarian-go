version: '3.8'

services:
  yossarian-go:
    image: yossarian-go/yossarian-go:latest
    ports:
      - "8080:8080"
    environment:
      - PORT=8080
      - ADMIN_PASSWORD=admin123
      - OIDC_ENABLED=false
      - AD_SERVICE_URL=http://yossarian-db-service:8081
      - MAX_TOTAL_UPLOAD_SIZE_MB=100
      - MAX_FILE_SIZE_MB=50
      - MAX_ZIP_FILE_SIZE_MB=10
      - MAX_FILE_COUNT=10
    depends_on:
      - yossarian-db-service
    restart: unless-stopped

  yossarian-db-service:
    image: yossarian-go-db-service:latest
    ports:
      - "8081:8081"
    volumes:
      - db-data:/data
    restart: unless-stopped

volumes:
  db-data: